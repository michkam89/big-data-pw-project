{
  "hash": "73ad4d3b134056b67393bad05cd11aeb",
  "result": {
    "markdown": "---\nwarnings: false\nexecute: \n  include: false\n  freeze: auto\n---\n\n# Analiza danych\n\n\n\n## Analiza aktywności użytkowników na forum\n\nJako pierwsze postanowiono zbadać czy forum jest aktywne. W tym celu liczbę postów zagregowano w miesięczne insterwały i zliczono ich ilość. Pierwsza wiadomość pojawiła się na forum 2014-01-21 natomiast ostatnia 2022-06-05. Na przestrzeni tych ~8,5 roku pojawiło się 3769 postów. Z @fig-ryc2 widać, że zainteresowanie forum spadało w czasie. W rekordowych pierwszych 2 miesiącach umieszczano ich odpowiednio 413 oraz 190, natomiast pod koniec badanego okresu wartości często nie przekraczały 10.\n\n\n\n::: {.cell execution_count=5}\n\n::: {.cell-output .cell-output-display execution_count=5}\n![Liczba postow w czasie z podzialem na pytania i odpowiedzi. Lewy panel wskazuje surowe wartości liczby postów, prawy wartości logarytmiczne o podstawie 10. Zamieszczono również linię trendu obliczoną przy użyciu algorytmu LOESS (ang. _Local Polynomial Regression Fitting_)](02_analytics_files/figure-pdf/fig-ryc2-output-1.pdf){#fig-ryc2}\n:::\n:::\n\n\nStosunek ilości odpowiedzi do zadawanych pytań (rato) rósł do roku 2021, w którym to zaczęto odnotowywać spadek. Na wzrost ratio miała wpływ zmniejszająca się ilość zadawanych pytań (maleje próba badana) co zostało przedstawione na @fig-ryc3. Patrząc na wartości średnie tylko co drugie pytanie uzyskiwało odpowiedź (ratio 0.48 +/- 0.22). Ogólne statystyki stosunku pytań do dopowiedzi w czasie zostały przedstawione w @tbl-ratios.\n\n\n::: {.cell execution_count=7}\n\n::: {.cell-output .cell-output-display execution_count=7}\n![Stosunek ilości odpowiedzi na zadane pytania w czasie, uwzględniając ilość zadanych pytań](02_analytics_files/figure-pdf/fig-ryc3-output-1.pdf){#fig-ryc3}\n:::\n:::\n\n\n::: {#tbl-ratios .cell tbl-cap='Statystyki stosunku ilości odpowiedzi na pytania. Bez uwzględnienia czy było ono zaakceptowane czy też nie.' execution_count=8}\n\n::: {.cell-output .cell-output-display execution_count=8}\n```{=tex}\n\\begin{tabular}{lrrrrr}\n\\toprule\n{} &   średnia &  odchylenie standardowe &  min &  max &   mediana \\\\\n\\midrule\n0 &  0.476316 &                0.219824 &  0.0 &  1.5 &  0.444444 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n\\newpage\n## Dynamika oraz statystyki udzielanych odpowiedzi\n\nTwórcy pytań na forum mają możliwość wybrania odpowiedzi, która jest najtrafniejsza i zawiera poprawną odpowiedź. Te odpowiedzi nazywane są zaakceptowanymi odpowiedziami. Zbadano jak często najwyżej oceniona odpowiedź nie była zaakceptowaną odpowiedzią.\n\n\nOkazało się, że w przypadku pytań, które posiadały jakąkolwiek odpowiedź, około 12.7% (646) przypadków najlepiej ocenianych odpowiedzi nie było tą, która została zaakceptowana przez autora.\n\nNastępnie porównano oceny odpowiedzi zaakceptowanych z pozostałymi odpowiedziami a statystyki przedstawiono w @tbl-a_stats oraz @fig-ryc9.\n\nPośród odpowiedzi na zadawane pytania wyróżniono 3 kategorie: \n\n1. odpowiedź zaakceptowana (`is_accepted=True`)\n1. odpowiedź niezaakceptowana (`is_accepted=False`)\n1. odpowiedź niezaakceptowana ale równocześnie brak jest zaakceptowanej odpowiedzi na to pytanie (`is_accepted=None`)\n\nZ analizy wynika, iż zaakceptowane odpowiedzi mają średnio wyższe oceny użytkowników (6,39) niż pozostałe oceny (2.75 - `is_accepted=None`;  2.58 - `is_accepted=False`), co było oczekiwanym wynikiem.\n\n\n::: {#tbl-a_stats .cell tbl-cap='Statystyki ocen odpowiedzi zaakceptowanych w stosunku do pozostałych' execution_count=11}\n\n::: {.cell-output .cell-output-display execution_count=11}\n```{=tex}\n\\begin{tabular}{llrrrrr}\n\\toprule\n{} & is\\_accepted &   średnia &  odchylenie standardowe &  min &  max &  mediana \\\\\n\\midrule\n0 &        None &  2.755169 &                3.181837 &   -5 &   30 &        2 \\\\\n1 &        True &  6.395044 &                5.915949 &    0 &   46 &        5 \\\\\n2 &       False &  2.584169 &                2.735329 &   -4 &   26 &        2 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n\n::: {.cell execution_count=13}\n\n::: {.cell-output .cell-output-display execution_count=13}\n![Rozkład ocen pytań zaakceptowanych w porównaniu do pozostałych](02_analytics_files/figure-pdf/fig-ryc9-output-1.pdf){#fig-ryc9}\n:::\n:::\n\n\n\n::: {.cell execution_count=15}\n\n::: {.cell-output .cell-output-display execution_count=15}\n![Rozkład czasu od pojawienia się pytania do zaakceptowanej odpowiedzi w minutach](02_analytics_files/figure-pdf/fig-ryc10-output-1.pdf){#fig-ryc10}\n:::\n:::\n\n\n::: {#tbl-time_stats .cell tbl-cap='Statystyki czasu od pojawienia się pytania do zaakceptowanej odpowiedzi w minutach' execution_count=16}\n\n::: {.cell-output .cell-output-display execution_count=16}\n```{=tex}\n\\begin{tabular}{lrrrrr}\n\\toprule\n{} &       średnia &  odchylenie standardowe &  min &         max &  mediana \\\\\n\\midrule\n0 &  25244.943571 &            123338.63251 &  0.0 &  1506239.05 &   753.25 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n::: {#tbl-time_stats_no_outliers .cell tbl-cap='Statystyki ocen odpowiedzi zaakceptowanych w stosunku do pozostałych po odrzuceniu wartości odstających (6*SD)' execution_count=17}\n\n::: {.cell-output .cell-output-display execution_count=17}\n```{=tex}\n\\begin{tabular}{lrrrrr}\n\\toprule\n{} &      średnia &  odchylenie standardowe &  min &      max &  mediana \\\\\n\\midrule\n0 &  3988.821096 &             9775.983836 &  0.0 &  73465.9 &   628.72 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nNastępnie zbadano jak szybko od pojawienia się pytania, pojawia się zaakceptowana odpowiedź. Dla wszystkich pytań na tym forum jest to średnio 25244 minuty, ale wartość środkowa (753) sugeruje, że średnia może być zaburzona. W celu obliczenia średniej nie zaburzonej tak dużymi wartościami odstającymi odrzucono wartości znajdujące powyżej 6 odchyleń standardowych od średniej (~75894 minuty). Tym razem uzyskano wartość 3988 minut (~66,5 godziny), przy wartości środkowej 628 (~10,5 godziny).\n\nRozkłady wartości przedstawiono na @fig-ryc10 oraz w @tbl-time_stats dla całego zbioru danych oraz @tbl-time_stats_no_outliers po odrzuceniu wartości odstających.\n\n\\newpage\n## Retencja użytkowników\n\nW całej historii forum zarejestrowanych zostało 8948 użytkowników, z czego jedno konto jest kontem bota. Miarą retencji użytkownika na forum określono czas od utworzenia konta to ostaniej zamieszczonej wiadomości. Wśród 50 najdłużej aktywnych kont zidentyfikowano konto z wynikiem aż 3052 dni a konto z ostatnim indeksem w tej grupie miało wynik 2128 dni. Jednakże patrząc na całą populację, wartość środkowa wyniosła 11, a 50% wartości mieści się pomiędzy 0 a 594 dniami. Użytkownicy z wartością 0, są to najprawdopodobniej użytkowicy, którzy zadali jedyne pytanie na forum w dniu założenia konta (410 użytkowników). Czas na forum najdłużej aktywnych użytkowników został zwizualizowany na @fig-ryc4. Dodatkowo okazało się, że 7691 (86%) kont było biernymi użytkownikami forum i nidgy nie dodało żadnego posta.\n\n\n::: {.cell execution_count=19}\n\n::: {.cell-output .cell-output-display execution_count=19}\n![Czas na forum 50 najdłużej aktywnych kont](02_analytics_files/figure-pdf/fig-ryc4-output-1.pdf){#fig-ryc4}\n:::\n:::\n\n\n\n\\newpage\n## Statystyki najwyżej oraz najniżej ocenianych pytań {#sec-qstats}\n\nZbadano statystyki zadawanych pytań. Użytkownicy forum mogą oceniać pojawiające się tam pytania czego miarą jest wartość `score`. Sprawdzono, czy długość zadanego pytania ma wpływ na jego ocenę. \n\n\nŚrednia długość pytania wyniosła 415 znaków (+/- 330) a wartość środkowa 331 znaków. Najdłuższe pytanie posiadało 3133 znaki a najkrótsze jedynie 30. Statystyki przedstawiono w @tbl-q_stats.\n\n::: {#tbl-q_stats .cell tbl-cap='Statystyki długości postów' execution_count=22}\n\n::: {.cell-output .cell-output-display execution_count=22}\n```{=tex}\n\\begin{tabular}{lrrrrr}\n\\toprule\n{} &     średnia &  odchylenie standardowe &   max &  min &  mediana \\\\\n\\midrule\n0 &  415.863676 &              330.836043 &  3133 &   30 &      331 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nŚrednio pytanie było oceniane na wartość 6.28 (+/-5.88) a wartość środkowa wyniosła 5. Najlepiej oceniane pytanie miało ocenę 67 a najgorzej -7. Statystyki zestawiono w @tbl-score_stats.\n\n::: {#tbl-score_stats .cell tbl-cap='Statystyki ocen użytkowników' execution_count=23}\n\n::: {.cell-output .cell-output-display execution_count=23}\n```{=tex}\n\\begin{tabular}{lrrrrr}\n\\toprule\n{} &   średnia &  odchylenie standardowe &  max &  min &  mediana \\\\\n\\midrule\n0 &  6.278804 &                5.876114 &   68 &   -7 &        5 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nZależność pomiędzy wartością `score` a długością wiadomości przedstawiono na @fig-ryc5. Ze względu na obecność dużej ilości wartości odstających obie wartości przedstawiono również w skali logarymicznej. \n\nNie wykryto korelacji pomiędzy tymi dwoma zmiennymi. Współczynnik korelacji wyniósł -0.048 oraz -0.018 dla wartości zlogarytmowanych.\n\n\nPostanowiono dodatkowo zbadać dwie podgrupy danych dla pytań najlepiej oraz najgorzej ocenianych. Wyodrębniono po 100 pytań z każdej z grup. Wyniki dla tych grup przestwationo na @fig-ryc5 (dolny panel) oraz w @tbl-q_stats_types i @tbl-score_stats_types.\n\nW podgrupie najlepiej ocenianych pytań średnia ocena wyniosła 20.6 +/- 8.5 a w podgrupie najgorzej ocenianych 0.4 +/- 1.2. Rozdzielność tych statystyk dla tych grup była oczekiwanym wynikiem.\n\nStatystyki długości pytań nie odbiegają od siebie w znaczący sposób (średnie 349 +/- 275 najlepiej oceniane oraz 389 +/- 424 najgorzej oceniane) sugerując iż to długość pytania nie ma znaczącego wpływu na jego ocenę. \n\n\n\n::: {.cell execution_count=27}\n\n::: {.cell-output .cell-output-display execution_count=27}\n![Oceny pytań (score) na forum w zależności od ilości znaków zawartych w pytaniu](02_analytics_files/figure-pdf/fig-ryc5-output-1.pdf){#fig-ryc5}\n:::\n:::\n\n\n::: {#tbl-q_stats_types .cell tbl-cap='Statystyki długości postów z podziałem na podgrupy najlepszych i najgorszych pytań' execution_count=28}\n\n::: {.cell-output .cell-output-display execution_count=28}\n```{=tex}\n\\begin{tabular}{llrrrrr}\n\\toprule\n{} &    type &  średnia &  odchylenie standardowe &   max &  min &  mediana \\\\\n\\midrule\n0 &     top &   349.08 &              275.088587 &  1823 &   46 &      261 \\\\\n1 &  bottom &   389.26 &              424.654836 &  3133 &   30 &      270 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n::: {#tbl-score_stats_types .cell tbl-cap='Statystyki ocen użytkowników z podziałem na podgrupy najlepszych i najgorszych pytań' execution_count=29}\n\n::: {.cell-output .cell-output-display execution_count=29}\n```{=tex}\n\\begin{tabular}{llrrrrr}\n\\toprule\n{} &    type &  średnia &  odchylenie standardowe &  max &  min &  mediana \\\\\n\\midrule\n0 &     top &     20.6 &                8.551685 &   68 &   14 &       18 \\\\\n1 &  bottom &      0.4 &                1.206045 &    1 &   -7 &        1 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nZauważono również że najlepiej oceniane pytania są również częściej oglądane i mają więcej odpowiedzi niż pytania najgorzej oceniane (@fig-ryc6). Najlepiej oceniane pytania mają średnio 17 odpowiedzi podczas gdy najgorzej jedynie 4 (@tbl-answers_stats_types) oraz odpowiednio średnio 26289 i 475 wyświetleń (@tbl-views_stats_types)\n\n\n::: {.cell execution_count=31}\n\n::: {.cell-output .cell-output-display execution_count=31}\n![Liczba odpowiedzi oraz oceny najlepiej oraz najgorzej ocenianych pytań w zależności od liczby ich wyświetleń](02_analytics_files/figure-pdf/fig-ryc6-output-1.pdf){#fig-ryc6}\n:::\n:::\n\n\n::: {#tbl-answers_stats_types .cell tbl-cap='Statystyki ilości odpowiedzi na pytania z podziałem na podgrupy najlepszych i najgorszych pytań' execution_count=32}\n\n::: {.cell-output .cell-output-display execution_count=32}\n```{=tex}\n\\begin{tabular}{llrrrrr}\n\\toprule\n{} &    type &  średnia &  odchylenie standardowe &  max &  min &  mediana \\\\\n\\midrule\n0 &     top &     3.96 &                2.581676 &   17 &    1 &        3 \\\\\n1 &  bottom &     1.28 &                0.964836 &    4 &    0 &        1 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n::: {#tbl-views_stats_types .cell tbl-cap='Statystyki ilości wyświetleń pytań z podziałem na podgrupy najlepszych i najgorszych pytań' execution_count=33}\n\n::: {.cell-output .cell-output-display execution_count=33}\n```{=tex}\n\\begin{tabular}{llrrrrr}\n\\toprule\n{} &    type &   średnia &  odchylenie standardowe &     max &  min &  mediana \\\\\n\\midrule\n0 &     top &  26047.65 &            76276.200191 &  648941 &  175 &     4715 \\\\\n1 &  bottom &    495.56 &             1220.756292 &    9124 &    3 &      141 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n\\newpage\n\n## Analiza znaczników (tagów)\n\n\nW celu identyfikacji tematów zapytań na forum przeanalizowano słowa kluczowe, którymi oznaczano pytania. Wyniki przedstawiono w postaci wykresu typu \"Chmura słów\" @fig-ryc7. Okazuje się, że użytkownicy najczęściej pytali o `wina` (134, ang. _wine_), `smak` (120, ang. _taste_), `historię` (85, ang. _history_) i o `rekomendacje` (76, ang. _recommandation_).\n\nTę samą analizę wykonano na grupie 100 najlepiej i najgorzej ocenianych pytań badanych w @sec-qstats. W pierwszej grupie najczęściej używano znaczników `smak` (17) oraz `warzenie` (14, ang. _brewing_), w drugiej natomiast najczęściej pytano o `wina` (20), `rekomendacje` (15) i `zdrowie` (12, ang. _health_).\n\n::: {.cell execution_count=35}\n\n::: {.cell-output .cell-output-stderr}\n```\n\r[Stage 126:>                                                        (0 + 1) / 1]\r\r                                                                                \r\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![Chmura słów przedstawiająca najczęściej używane znaczniki na forum](02_analytics_files/figure-pdf/fig-ryc7-output-2.pdf){#fig-ryc7}\n:::\n:::\n\n\n\n\nNastępnie sprawdzono, które ze znaczników nie tylko były najczęściej używane, lecz które generowały najwięcej wyświetleń. W tym celu zsumowano liczbę wyświetleń wszystkich zapytań na forum, w którym pojawił się dany znacznik (@tbl-tags_views). Znaczniki `taste` oraz `health` generują najwięcej wyświetleń na tym forum w ilości 1349051 oraz 1316064, na dalszych miejscach znajdują się znaczniki `preservation` (686106), `storage` (558949) oraz `whiskey`(470841).\n\n\n::: {#tbl-tags_views .cell tbl-cap='Sumaryczne ilości wyświetleń wiadomości zawierających dany znacznik. Przedstawiono 10 najpopularniejszych znaczników.' execution_count=39}\n\n::: {.cell-output .cell-output-display execution_count=39}\n```{=tex}\n\\begin{tabular}{llr}\n\\toprule\n{} &           tag &  sum\\_views \\\\\n\\midrule\n0 &         taste &    1330670 \\\\\n1 &        health &    1286001 \\\\\n2 &  preservation &     682216 \\\\\n3 &       storage &     542860 \\\\\n4 &       whiskey &     464756 \\\\\n5 &       bourbon &     330268 \\\\\n6 &       brewing &     307892 \\\\\n7 &           ipa &     291935 \\\\\n8 &       spirits &     255328 \\\\\n9 &      drinking &     225924 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nZbadano również czy wykorzystanie najczęściej używanych znaczników zmieniało się w czasie istnienia forum. Z danych zaprezentowanych na @fig-ryc8 można zaobserwować że niektóre znaczniki takie jak `spirits`, `bourbon` czy `whiskey` zaczęły być używane dopiero około roku 2016 - około 2 lata po pierwszej wiadomości na forum. W danych zauważono również, że częstość używania znaczników jest skokowa. Może to być związane z ogólną małą ilością postów zamieszczanych na forum. Wyjątek stanowią najpopularniejsze znaczniki, takie jak `taste` czy `health`, których częstość występowania jest bardziej regularna.\n\n\n\n\n\n::: {.cell execution_count=44}\n\n::: {.cell-output .cell-output-display execution_count=44}\n![Liczba postów w czasie dla każdego z najczęściej wyświetlanych znaczników. Wartości zagregowane na poziomie miesięcy. Górny panel przedstawia wartości miesięczne, dolny natomiast miesięczną sumę kumulatywną.](02_analytics_files/figure-pdf/fig-ryc8-output-1.pdf){#fig-ryc8}\n:::\n:::\n\n\n\\newpage\n\n## Analiza tytułów postów\n\nDodatkową metodą, oprócz analizy znaczkików, którą można wykorzystać w celu zbadania tematów poruszanych na forum może być analiza najczęściej pojawiających się słów. Można do tego wykorzystać treść tytułów wiadomości jak i ich główną treść. W niniejszej pracy skupiono się na analizie treści tytułów wiadomości, jako że bardzo często zawierają one dużo słów kluczowych.\n\nTytuły wiadomości są nieustrukturyzowanymi ciągami znaków, z tego powodu do ich analizy wykorzystano powszechnie używane narzędzia stosowane przy analizach NLP (ang. _**N**atural **L**anguage **P**rocessing_). Proces zastosowanej tutaj analizy tekstu składał się z 4 kroków:\n\n1. Wyodrębnienia tokenów\n1. Usunięcia tokenów o długości znaku 1\n1. Usunięcia tokenów nie niosących informacji o treści (ang. _stop words_)\n1. Ujednolicenia różych form danego wyrazu poprzez zabieg stemming'u (ang. _stemming_), mającego na celu ucinanie końcówek wyrazów (tokenów) i pozostawieniu jedynie jego wartości bazowej. \n\n\nPrzykładowa tabela wizualizująca tokeny surowe w porównaniu do tokenów po odfiltrowaniu słów typu `stop words` oraz tokenów krótszych niż 1 zaprezentowano na @tbl-tokens\n\n::: {#tbl-tokens .cell tbl-cap='Przykładowe rekordy danych wizualizujące proces przetwarzania tekstu. Kolejność chronologiczna kolumn `title` --> `words_token` --> `words_no_stop` --> `words_stem`' execution_count=46}\n\n::: {.cell-output .cell-output-display execution_count=46}\n```{=tex}\n\\begin{tabular}{ll}\n\\toprule\n{} &                                                                      0 \\\\\n\\midrule\ntitle         &           What is a citra hop, and how does it differ from other hops? \\\\\nwords\\_token   &  [what, is, citra, hop, and, how, does, it, differ, from, other, hops] \\\\\nwords\\_no\\_stop &                                             [citra, hop, differ, hops] \\\\\nwords\\_stem    &                                              [citra, hop, differ, hop] \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nDzięki zabiegowi stemmingu otrzymywany jest bardziej jednorodny zestaw danych. Liczba unikalnych tokenów została zredukowana z 2055 do 1680.\n\n\nNastępnie zliczono, które tokeny pojawiają się w największej ilości tytułów i zaprezentowano w @tbl-tokens_count. Najczęściej używanymi tokenami były tokeny `beer` (476), `wine` (152) oraz `drink` (105). Wyniki pozostają w zgodzie z wnioskami uzyskanymi poprzez analizę znaczników.\n\n\n::: {#tbl-tokens_count .cell tbl-cap='Zliczenia tokenów słów najczęściej pojawiających się w tytułach postów (15 najliczniejszych)' execution_count=49}\n\n::: {.cell-output .cell-output-display execution_count=49}\n```{=tex}\n\\begin{tabular}{llr}\n\\toprule\n{} &      words &  count \\\\\n\\midrule\n0  &       beer &    476 \\\\\n1  &       wine &    147 \\\\\n2  &      drink &    104 \\\\\n3  &    alcohol &     88 \\\\\n4  &     differ &     72 \\\\\n5  &      bottl &     68 \\\\\n6  &        use &     50 \\\\\n7  &       tast &     47 \\\\\n8  &       brew &     43 \\\\\n9  &       make &     41 \\\\\n10 &       good &     33 \\\\\n11 &   cocktail &     29 \\\\\n12 &        age &     27 \\\\\n13 &        ale &     26 \\\\\n14 &  recommend &     26 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n",
    "supporting": [
      "02_analytics_files/figure-pdf"
    ],
    "filters": []
  }
}